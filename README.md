# Проект ChangePassword

## Описание проекта

Проект ChangePassword представляет собой веб-приложение для управления паролями пользователей с возможностью смены паролей по определенным правилам валидации. Система включает в себя функционал регистрации, авторизации, смены паролей, просмотра профилей пользователей, рейтинга по количеству смен паролей и стену сообщений.

Основные функции:
- Регистрация и авторизация пользователей
- Смена паролей с учетом правил валидации
- Просмотр истории смены паролей
- Рейтинг пользователей по количеству смен паролей
- Стена сообщений для взаимодействия между пользователями
- Адаптивная сетка в стиле masonry grid для размещения окон

## Требования для установки

Для работы проекта необходимы следующие компоненты:
- Python 3.8 или выше
- СУБД MySQL версии 8.2
- Интернет-соединение для подключения внешних библиотек

## Установка проекта

### 1. Подготовка базы данных

Необходимо создать базу данных MySQL с названием `changepassword` и настроить пользователя с правами доступа к этой базе данных.

Вы можете использовать:
- MySQL Server
- OpenServer с настроенным MySQL и phpMyAdmin (опционально)

### 2. Распаковка проекта

Распакуйте архив проекта в любое удобное место на диске.

### 3. Установка зависимостей

Откройте терминал, перейдите в директорию проекта и выполните команду:

```
pip install -r requirements.txt
```

Это установит необходимые библиотеки:
- Flask 2.3.3
- bcrypt 4.0.1
- mysql-connector-python 8.2.0

### 4. Настройка подключения к базе данных

Откройте файл `init_db.py` и убедитесь, что параметры подключения к базе данных соответствуют вашей конфигурации MySQL. При необходимости измените значения в переменной `DATABASE_CONFIG`:

```python
DATABASE_CONFIG = {
    'host': 'MySQL-8.2',  # Имя хоста MySQL
    'user': 'root',      # Имя пользователя
    'password': '',      # Пароль
    'database': 'changepassword',  # Название базы данных
    'charset': 'utf8mb4'
}
```

Также проверьте аналогичные настройки в файле `app.py`.

### 5. Инициализация базы данных

Для создания необходимых таблиц и триггеров в базе данных у вас есть два варианта:

1. Запустить файл инициализации базы данных командой:
   ```
   python init_db.py
   ```

2. Загрузить SQL-скрипт из файла `db.sql` напрямую в MySQL Server.

После выполнения любого из этих действий будут созданы таблицы и триггеры для базы данных. По умолчанию также будет создан тестовый пользователь с логином `admin` и паролем `admin123`.

## Запуск проекта

1. Запустите базу данных MySQL при помощи OpenServer или MySQL Server.

2. Перейдите в директорию проекта и запустите основной файл командой:
   ```
   python app.py
   ```

3. Будет запущен локальный веб-сервер по адресу `127.0.0.1:5000`.

4. Откройте веб-браузер и перейдите по адресу `http://127.0.0.1:5000/`.

5. Чтобы убедиться, что связь с базой данных настроена правильно, перейдите на страницу "Рейтинг". Если список пользователей отображается, значит проект настроен правильно.

## Настройка правил валидации паролей

Для изменения правил валидации паролей администратору необходимо отредактировать файл `config/validation_rules.json`. 

При редактировании правил необходимо соблюдать следующие требования:
- Сохранять структуру JSON-файла
- Для каждого правила указывать параметр `active` (true/false)
- Не удалять существующие правила, а только изменять их статус активности

После изменения правил валидации необходимо перезапустить сервер для применения изменений.

## Структура проекта

- `app.py` - основной файл приложения с маршрутами и логикой
- `init_db.py` - скрипт инициализации базы данных
- `requirements.txt` - список зависимостей
- `config/` - директория с конфигурационными файлами
- `css/` - стили приложения
- `js/` - JavaScript файлы, включая grid-layout.js для адаптивной сетки
- `database/` - файлы, связанные с базой данных
- `*.html` - HTML-шаблоны страниц